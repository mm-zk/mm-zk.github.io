import{_ as A}from"./CvSxE_qq.js";import{g as v,o as l,c as u,a as t,t as c,F as x,H as T,Y as g,A as C,d as k,n as V,a7 as E,Z as F,x as y,p as S,e as N,_ as I,b,W as P,s as H,w as W}from"./Dk_43wzT.js";import{u as w,a as G}from"./CPvhlEFo.js";import{z as M,B as U,C as q,m as D}from"./yhpzh7P7.js";import"./DSwa0AwS.js";import"./CdkeNSEz.js";import"./CXwrXqVy.js";import"./Bvgi-ftF.js";import"./B9eUGrDS.js";import"./BmYYtP1Z.js";import"./BQkc-AXV.js";function z(o,n){let[s,e="0"]=o.split(".");const a=s.startsWith("-");if(a&&(s=s.slice(1)),e=e.replace(/(0+)$/,""),n===0)Math.round(+`.${e}`)===1&&(s=`${BigInt(s)+1n}`),e="";else if(e.length>n){const[i,p,m]=[e.slice(0,n-1),e.slice(n-1,n),e.slice(n)],h=Math.round(+`${p}.${m}`);h>9?e=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):e=`${i}${h}`,e.length>n&&(e=e.slice(1),s=`${BigInt(s)+1n}`),e=e.slice(0,n)}else e=e.padEnd(n,"0");return BigInt(`${a?"-":""}${s}${e}`)}function L(o,n="wei"){return z(o,M[n])}const O=v({__name:"ShowBounty",props:["repo","prNumber"],setup(o){const n=o;return(s,e)=>(l(),u(x,null,[t("div",null,"Hello Bounty and number "+c(n.prNumber),1),t("div",null," We are "+c(n.repo),1)],64))}}),Z=o=>(S("data-v-d4dcf46a"),o=o(),N(),o),K={key:0,class:"overlay"},Y={class:"dialog"},j=Z(()=>t("h2",null,"Hello",-1)),J=["value"],Q=v({__name:"AddBounty",props:{repo:{},prNumber:{},reviewers:{}},setup(o){var B;const s=(B=o.reviewers)==null?void 0:B.map((d,f)=>({id:f,name:d.login})),e=T(!1);let a="";const i=()=>{console.log("Confirmed!"),$()},p=()=>{console.log("Before Button pressed",e),e.value=!0,console.log("Button pressed",e)},m=()=>{e.value=!1},{result:h,execute:$,inProgress:r,error:le}=w(async()=>{console.log("Sending transaction...");const d=await U({to:"0xc981b213603171963F81C687B9fC880d33CaeD16",value:L("1")});return console.log(d.hash),R(d.hash),d}),{result:ue,execute:R,inProgress:ce,error:ie}=w(async d=>await q({hash:d}));return(d,f)=>(l(),u("div",null,[t("button",{onClick:f[0]||(f[0]=_=>p())},"Show Dialog"),g(e)?(l(),u("div",K,[t("div",Y,[j,t("div",null,[(l(!0),u(x,null,C(g(s),_=>(l(),u("label",{key:_.id},[t("input",{type:"checkbox",value:_.id},null,8,J),k(" "+c(_.name),1)]))),128))]),V(t("input",{type:"text","onUpdate:modelValue":f[1]||(f[1]=_=>F(a)?a.value=_:a=_),placeholder:"Enter some text"},null,512),[[E,g(a)]]),t("button",{onClick:i},"Confirm"),t("button",{onClick:m},"Close")])])):y("",!0)]))}}),X=I(Q,[["__scopeId","data-v-d4dcf46a"]]),ee=o=>(S("data-v-f5df00dd"),o=o(),N(),o),te=ee(()=>t("thead",null,[t("tr",null,[t("th",null,"PR"),t("th",null,"Author"),t("th",null,"Status"),t("th",null,"Bounties"),t("th",null,"Actions")])],-1)),ne={key:0},oe=v({__name:"Github",props:["repo"],setup(o){const n=o,{result:s,execute:e,inProgress:a,error:i}=w(async()=>{const p=`https://api.github.com/repos/${n.repo}/pulls?state=all`;return await G.get(p).then(m=>m.data.filter(r=>r.state==="open"||r.state==="closed"&&new Date(r.closed_at)>=new Date(Date.now()-14*24*60*60*1e3)))});return e(),(p,m)=>{const h=O,$=X;return l(),u("div",null,[t("table",null,[te,t("tbody",null,[k(" Repository: "+c(n.repo)+" ",1),(l(!0),u(x,null,C(g(s),r=>(l(),u("tr",{key:r.id},[t("td",null,"#"+c(r.number)+" - "+c(r.title),1),t("td",null,c(r.user.login),1),t("td",null,c(r.state)+", "+c(new Date(r.created_at).toLocaleDateString()),1),t("td",null,[b(h,{repo:n.repo,prNumber:r.number},null,8,["repo","prNumber"])]),t("td",null,[r.state=="open"?(l(),u("div",ne,[b($,{repo:n.repo,prNumber:r.number,reviewers:r.requested_reviewers},null,8,["repo","prNumber","reviewers"])])):y("",!0)])]))),128))])])])}}}),se=I(oe,[["__scopeId","data-v-f5df00dd"]]),re=v({__name:"Connected",setup(o){const{account:n}=P(D());return(s,e)=>g(n).isConnected?H(s.$slots,"default",{key:0}):y("",!0)}}),ae=t("h1",null,"GitHub ZKSync",-1),xe=v({__name:"index",setup(o){D();const n="mm-zk/github-ci-exp";return(s,e)=>{const a=A,i=se,p=re;return l(),u("div",null,[ae,b(a),b(p,null,{default:W(()=>[b(i,{repo:g(n)},null,8,["repo"])]),_:1})])}}});export{xe as default};
